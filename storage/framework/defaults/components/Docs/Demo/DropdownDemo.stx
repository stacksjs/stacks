<script>
export const menuItems = [
  { icon: 'i-hugeicons-pencil-20-solid', label: 'Edit' },
  { icon: 'i-hugeicons-document-duplicate-20-solid', label: 'Duplicate' },
  { divider: true },
  { icon: 'i-hugeicons-archive-box-20-solid', label: 'Archive' },
  { icon: 'i-hugeicons-arrow-path-20-solid', label: 'Move' },
  { divider: true },
  { icon: 'i-hugeicons-trash-20-solid', label: 'Delete', variant: 'danger' },
]
export const isOpen = false

function getMenuSections(items) {
  const sections = []
  let currentSection = []

  for (const item of items) {
    if (item.divider) {
      if (currentSection.length > 0) {
        sections.push(currentSection)
        currentSection = []
      }
    } else {
      currentSection.push(item)
    }
  }

  if (currentSection.length > 0) {
    sections.push(currentSection)
  }

  return sections
}
</script>

<div class="max-w-4xl">
  <DocsPlayground>
    <div class="space-y-4 mb-12 flex flex-col items-center justify-center h-[200px]">
      <div class="relative inline-block text-left">
        <button
          class="inline-flex items-center justify-center gap-2 px-4 py-2.5 text-sm font-medium rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2 transition-all duration-200"
          data-action="toggle-dropdown"
        >
          Options
          <div class="i-hugeicons-chevron-down-20-solid w-5 h-5 transition-transform duration-200 {{ isOpen ? 'rotate-180' : '' }}"></div>
        </button>

        @if(isOpen)
          <div class="absolute right-0 mt-2 w-56 origin-top-right divide-y divide-gray-100 rounded-lg bg-white shadow-lg ring-1 ring-black/5 focus:outline-none">
            @foreach(getMenuSections(menuItems) as section)
              <div class="p-1">
                @foreach(section as item)
                  <button
                    type="button"
                    class="group relative flex w-full items-center rounded-md px-2 py-2 text-sm outline-none transition-colors {{ item.variant == 'danger' ? 'text-red-600 hover:bg-red-50' : 'text-gray-700 hover:bg-gray-50' }}"
                    data-action="menu-item"
                    data-item-label="{{ item.label }}"
                  >
                    <div class="{{ item.icon }} mr-2 h-5 w-5 {{ item.variant == 'danger' ? 'text-red-600' : 'text-gray-500 group-hover:text-gray-700' }}"></div>
                    {{ item.label }}
                  </button>
                @endforeach
              </div>
            @endforeach
          </div>
        @endif
      </div>
    </div>

    <div slot="code">
      <!-- DropdownCode component would be rendered here -->
    </div>
  </DocsPlayground>
</div>

<style>
.rotate-180 {
  transform: rotate(180deg);
}
</style>
